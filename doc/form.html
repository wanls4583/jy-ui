<!--
 * @Author: lisong
 * @Date: 2021-03-16 15:19:13
 * @Description: 
-->
<!DOCTYPE html>
<html lang="en">

<head>
    <title>表单</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script type='text/javascript' src='./js/require.js'></script>
    <link rel="stylesheet" type="text/css" href="../css/jy-ui.css">
    <link rel="stylesheet" type="text/css" href="./css/frame.css">
    <style>
        a {
            color: #5FB878;
        }
    </style>
    <script>
        require.config({
            baseUrl: '../'
        });
    </script>
</head>

<body>
    <div class="jy-content">
        <div class="jy-content-header">
            <div class="jy-content-title">表单</div>
            <div class="jy-content-btns">
                <button class="jy-btn jy-btn-sm" id="example">示例</button>
            </div>
        </div>
        <fieldset class="jy-field">
            <legend>小睹为快</legend>
            <div class="jy-field-box">
                <div class="code1 rendered">
                    <form action="javascript:;" class="jy-form" id="form" style="width:625px;" jy-filter="form-test">
                        <div class="jy-form-item">
                            <label for="" class="jy-form-label jy-required">姓名</label>
                            <div class="jy-input-block">
                                <input type="text" class="jy-input" name="name" jy-verify="required">
                            </div>
                        </div>
                        <div class="jy-form-item">
                            <label for="" class="jy-form-label">是否成年</label>
                            <div class="jy-input-block">
                                <span>否</span>
                                <input type="checkbox" name="adult" jy-skin="switch">
                                <span>是</span>
                            </div>
                        </div>
                        <div class="jy-form-item">
                            <label for="" class="jy-form-label">性别</label>
                            <div class="jy-input-block">
                                <input type="radio" name="sex" title="男" value="男" checked>
                                <input type="radio" name="sex" title="女" value="女">
                            </div>
                        </div>
                        <div class="jy-form-item">
                            <label for="" class="jy-form-label">爱好</label>
                            <div class="jy-input-block">
                                <input type="checkbox" name="like" title="篮球" value="篮球" checked>
                                <input type="checkbox" name="like" title="看书" value="看书">
                                <input type="checkbox" name="like" title="唱歌" value="唱歌">
                            </div>
                        </div>
                        <div class="jy-form-item">
                            <label for="" class="jy-form-label jy-required">城市</label>
                            <div class="jy-input-block">
                                <select name="city" jy-verify="required">
                                    <option value=""></option>
                                    <option value="0">北京</option>
                                    <option value="1">上海</option>
                                    <option value="2">广州</option>
                                    <option value="3">深圳</option>
                                    <option value="4">杭州</option>
                                </select>
                            </div>
                        </div>
                        <div class="jy-form-item">
                            <label for="" class="jy-form-label">个性签名</label>
                            <div class="jy-input-block">
                                <textarea class="jy-textarea" name="sign"></textarea>
                            </div>
                        </div>
                        <div style="text-align:center">
                            <button type="submit" class="jy-btn">保存</button>
                        </div>
                        <script>
                            require(['modules/form'], function (Form) {
                                Form.render('', '#form');
                                Form.on('submit(form-test)', function () {
                                    console.log('提交成功');
                                });
                            });
                        </script>
                    </form>
                </div>
                <div class="pad-10">下面是【小睹为快】对应的代码</div>
                <pre><code id="code1" class="language-html"></code></pre>
                <blockquote>
                    <div>渲染<em> radio </em>、<em> checkbox </em>、<em> select </em>等元素时，需要引入<em> form </em>模块，然后执行<em> render </em>操作。</div>
                </blockquote>
            </div>
        </fieldset>
        <fieldset class="jy-field">
            <legend>输入框</legend>
            <div class="jy-field-box">
                <div class="jy-form-inline code2">
                    <input type="text" class="jy-input" jy-verify="required">
                </div>
                <div class="pad-10">代码：</div>
                <pre><code id="code2"></code></pre>
                <blockquote>
                    <div><em>class="jy-input"</em>：jy.css提供的通用css类</div>
                    <div><em>jy-verify</em>：注册form模块需要验证的类型</div>
                    <div><em>disabled</em>：开启禁用</div>
                </blockquote>
            </div>
        </fieldset>
        <fieldset class="jy-field">
            <legend>下拉选择框</legend>
            <div class="jy-field-box">
                <div class="jy-form-inline code3">
                    <select name="city" jy-verify="required" jy-search="true">
                        <option value="">选择城市</option>
                        <option value="1">上海</option>
                        <option value="2" selected>北京</option>
                        <option value="3" disabled>广州</option>
                    </select>
                </div>
                <div class="pad-10">代码：</div>
                <pre><code id="code3"></code></pre>
                <blockquote>
                    <div><em>jy-verify</em>：注册form模块需要验证的类型</div>
                    <div><em>jy-search</em>：是否开启搜索</div>
                    <div><em>disabled</em>：开启禁用，<em> select </em>和<em> option </em>都可以添加该属性</div>
                    <div><em>jy-appendTo="body"</em>：可让下拉弹框添加到body容器（在某些特殊情况下可用到），默认情况下，下拉弹框是添加到select标签后面</div>
                    <div>将第一个<em> option </em>项值设为空，其将成为提示项</div>
                    <div>给<em> option </em>添加<em> selected </em>属性可设置默认选中项</div>
                </blockquote>
            </div>
        </fieldset>
        <fieldset class="jy-field">
            <legend>多选框</legend>
            <div class="jy-field-box">
                <div class="code4">
                    <input type="checkbox" name="like" title="篮球" value="篮球" checked>
                    <input type="checkbox" name="like" title="看书" value="看书" disabled>
                    <input type="checkbox" name="like" title="唱歌" value="唱歌">
                </div>
                <div class="pad-10">代码：</div>
                <pre><code id="code4"></code></pre>
                <blockquote>
                    <div><em>checked</em>：默认选中的项</div>
                    <div><em>disabled</em>：开启禁用</div>
                </blockquote>
            </div>
        </fieldset>
        <fieldset class="jy-field">
            <legend>单选框</legend>
            <div class="jy-field-box">
                <div class="code5">
                    <input type="radio" name="sex" title="男" value="男" checked>
                    <input type="radio" name="sex" title="女" value="女">
                </div>
                <div class="pad-10">代码：</div>
                <pre><code id="code5"></code></pre>
                <blockquote>
                    <div><em>checked</em>：默认选中的项</div>
                    <div><em>disabled</em>：开启禁用</div>
                </blockquote>
            </div>
        </fieldset>
        <fieldset class="jy-field">
            <legend>开关</legend>
            <div class="jy-field-box">
                <div class="code6">
                    <span>是</span>
                    <input type="checkbox" name="adult" jy-skin="switch" checked>
                    <span>否</span>
                </div>
                <div class="pad-10">代码：</div>
                <pre><code id="code6"></code></pre>
                <blockquote>
                    <div><em>jy-skin="switch"</em>：声明为开关样式</div>
                    <div><em>checked</em>：默认开启</div>
                    <div><em>disabled</em>：开启禁用</div>
                </blockquote>
            </div>
        </fieldset>
        <fieldset class="jy-field">
            <legend>文本域</legend>
            <div class="jy-field-box">
                <div class="code7">
                    <textarea name="sign" class="jy-textarea" style="width:500px;" jy-verify="required"></textarea>
                </div>
                <div class="pad-10">代码：</div>
                <pre><code id="code7"></code></pre>
                <blockquote>
                    <div><em>class="jy-textarea"</em>：jy.css提供的通用css类</div>
                    <div><em>jy-verify</em>：注册form模块需要验证的类型</div>
                    <div><em>disabled</em>：开启禁用</div>
                </blockquote>
            </div>
        </fieldset>
        <fieldset class="jy-field">
            <legend>表单验证</legend>
            <div class="jy-field-box">
                <div class="pad-10"><em> jy-verify </em>支持如下几种类型：</div>
                <table class="property-table">
                    <tr>
                        <td>required</td>
                        <td>验证值是否为空</td>
                    </tr>
                    <tr>
                        <td>number</td>
                        <td>验证值是否为数字</td>
                    </tr>
                    <tr>
                        <td>int</td>
                        <td>验证值是否为整数</td>
                    </tr>
                    <tr>
                        <td>date</td>
                        <td>验证值是否为日期</td>
                    </tr>
                    <tr>
                        <td>phone</td>
                        <td>验证值是否为手机号码</td>
                    </tr>
                    <tr>
                        <td>email</td>
                        <td>验证值是否为邮箱</td>
                    </tr>
                    <tr>
                        <td>identify</td>
                        <td>验证值是否为身份证</td>
                    </tr>
                    <tr>
                        <td>url</td>
                        <td>验证值是否为链接</td>
                    </tr>
                </table>
                <div class="pad-10">除此之外，还可以通过<em> Form </em>对象，添加自定义验证规则：</div>
                <code class="code8" style="display:none;">
                    Form.addRule({'max-250': {
                        msg: '最多输入250个字符',
                        verify: function (str) {
                            if (str && str.length > 250) {
                                return false;
                            }
                            return true;
                        }
                    }})
                </code>
                <pre><code id="code8" class=""></code></pre>
            </div>
        </fieldset>
        <fieldset class="jy-field">
            <legend>表单事件</legend>
            <div class="jy-field-box">
                <div class="pad-10">1、<em>raido </em>事件：</div>
                <code class="code9" style="display:none;">
                    //只监听属性jy-filter="filter"的radio元素
                    Form.on('radio(filter)', function(event){
                        //do something
                    });
                    //监听所有raido改变事件
                    Form.on('radio', function(event){
                        //do something
                    });
                </code>
                <pre><code id="code9" class="language-javascript"></code></pre>
                <div class="pad-10">2、<em>checkbox </em>事件：</div>
                <code class="code10" style="display:none;">
                    //只监听属性jy-filter="filter"的checkbox元素
                    Form.on('checkbox(filter)', function(event){
                        //do something
                    });
                    //监听所有checkbox改变事件
                    Form.on('checkbox', function(event){
                        //do something
                    });
                </code>
                <pre><code id="code10" class="language-javascript"></code></pre>
                <div class="pad-10">3、<em>select </em>事件：</div>
                <code class="code11" style="display:none;">
                    //只监听属性jy-filter="filter"的select元素
                    Form.on('select(filter)', function(event){
                        //do something
                    });
                    //监听所有select改变事件
                    Form.on('select', function(event){
                        //do something
                    });
                </code>
                <pre><code id="code11" class="language-javascript"></code></pre>
                <div class="pad-10">4、<em>switch </em>事件：</div>
                <code class="code12" style="display:none;">
                    //只监听属性jy-filter="filter"的switch元素
                    Form.on('switch(filter)', function(event){
                        //do something
                    });
                    //监听所有switch改变事件
                    Form.on('switch', function(event){
                        //do something
                    });
                </code>
                <pre><code id="code12" class="language-javascript"></code></pre>
                <div class="pad-10">5、<em>submit </em>事件：</div>
                <code class="code13" style="display:none;">
                    //只监听属性jy-filter="filter"的form元素
                    Form.on('submit(filter)', function(event){
                        //do something
                    });
                    //监听所有submit事件
                    Form.on('submit', function(event){
                        //do something
                    });
                </code>
                <pre><code id="code13" class="language-javascript"></code></pre>
            </div>
        </fieldset>
        <fieldset class="jy-field">
            <legend>表单方法</legend>
            <div class="jy-field-box">
                <table class="property-table">
                    <tr>
                        <th>方法</th>
                        <th>描述</th>
                        <th>参数</th>
                        <th>返回值</th>
                    </tr>
                    <tr>
                        <td>Form.render</td>
                        <td>渲染表单控件</td>
                        <td>
                            <div>参数：(string：控件类型，string/dom：[容器]，boolean：[强制刷新])</div>
                            <div>如果传递了容器参数，将只渲染改容器类的控件</div>
                            <div>强制刷新将把之前渲染过的UI删除，再重新渲染</div>
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Form.verify</td>
                        <td>手动验证表单</td>
                        <td>
                            <div>参数：(string/dom：容器)</div>
                        </td>
                        <td>boolean：验证是否通过</td>
                    </tr>
                    <tr>
                        <td>Form.on</td>
                        <td>监听事件</td>
                        <td>
                            <div>参数：(string：监听类型[(过滤器)]，function：回调函数)</div>
                            <div>监听类型：<em> submit </em><em> raido </em><em> checkbox </em><em> select </em><em> switch </em>，多个监听类型可以用空格分隔</div>
                            <div>过滤器为可选参数</div>
                            <div>回调函数的参数结构为：</div>
                            <div class="code14" style="display:none;"> { data: value值, dom: 触发事件的元素 } </div>
                            <pre><code id="code14" class="language-javascript"></code></pre>
                        </td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Form.trigger</td>
                        <td>手动触发事件</td>
                        <td>
                            <div>参数：(string：监听类型[(过滤器)]，object：回调函数的参数)</div>
                            <div>多个监听类型可以用空格分隔</div>
                        </td>
                        <td></td>
                    </tr>
                </table>
            </div>
        </fieldset>
    </div>
</body>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/atom-one-light.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
<script type="text/javascript">
    require(['modules/form', 'modules/jquery'], function (Form, $) {
        var codes = ['code1', 'code2', 'code3', 'code4', 'code5', 'code6', 'code7', 'code8', 'code9', 'code10', 'code11', 'code12', 'code13', 'code14'];
        codes.map(function (code) {
            var html = $('.' + code);
            var space = 0;
            if (html.hasClass('rendered')) {
                html = $('<div>' + html[0].innerHTML + '</div>');
                html.find('div.jy-select,div.jy-checkbox,div.jy-radio,div.jy-switch').remove();
            }
            html = html[0].innerHTML;
            html = html.split('\n');
            html = html.slice(1, html.length - 1);
            space = /^\s*/.exec(html[0]);
            space = space[0].length;
            html = html.map(function (line) {
                return line.slice(space);
            });
            $('#' + code).text(html.join('\n'));
        });
        try {
            hljs.highlightAll();
        } catch (e) { }
        Form.render();
        $('#example').on('click', function () {
            window.top.openTab('表单示例', 'https://codepen.io/wanls4583/embed/bGRxVKQ?default-tab=html%2Cresult&editable=true&theme-id=light');
        });
    });
</script>

</html>